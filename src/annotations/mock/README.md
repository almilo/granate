# Mock annotation

This annotation provides GraphQL integration with [casual](https://github.com/boo1ean/casual) through
[granate](https://github.com/almilo/granate).

* given a value through the **value** annotation argument, creates a resolver function which returns mock data generated by
the corresponding [casual](https://github.com/boo1ean/casual) generator. If the casual generator is a function, it will
be invoked with the arguments provided in the **args** annotation argument.
* if **value** is **one_of** and an array is provided in **args** then a random value from **args** is returned.
* if **value** does not match neither a casual generator nor is **one_of**, then it returns **value** itself.

## Examples

Given a GraphQL schema like:

```
# file: mocks.graphqls

type CreditCard @mock(value: "card_data") { # returns an object produced by casual.card_data
    type: String
    number: String
}

type Foo {
    text: String @mock(value: "sentence") # returns a value produced by casual.sentence
    date: String @mock(value: "date", args: ["DD.MM.YY"]) # returns a value produced by casual.date("DD.MM.YY")
    oneOf: String @mock(value: "one_of", args: ["Foo", "Bar", 42]) # returns a value from "args"
    int: Int @mock(value: 42) # returns 42
    string: String @mock(value: "foo") # returns "foo"
}

type Query {
    cards: [CreditCard]
    foo: Foo
}

```

it can be made executable like so:

```
> granate serve mocks.graphqls -a

Annotations: 'mock,rest' enabled.
Granate server listening on: 'http://localhost:4000/graphql'.
```
